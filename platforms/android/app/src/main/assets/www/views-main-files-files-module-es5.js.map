{"version":3,"sources":["src/app/components/file/file.component.html","src/app/views/main/files/files.component.html","src/app/components/file/file.component.ts","src/app/components/file/file.module.ts","src/app/models/file/file.model.ts","src/app/models/file/file.upload.model.ts","src/app/services/file.service.ts","src/app/views/main/files/files.component.ts","src/app/views/main/files/files.module.ts"],"names":[],"mappings":"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","sourcesContent":["export default \"<div class=\\\"js-upload uk-padding-small uk-padding-remove-left\\\" uk-form-custom>\\r\\n    <input type=\\\"file\\\" multiple #input [disabled]=\\\"disabled\\\" [id]=\\\"formControlName\\\" [name]=\\\"formControlName\\\" [required]=\\\"required\\\" (change)=\\\"change(input.files)\\\">\\r\\n    <button class=\\\"uk-button uk-button-default\\\" type=\\\"button\\\" tabindex=\\\"-1\\\">Select</button>\\r\\n</div>\\r\\n\\r\\n<div>\\r\\n    <ul class=\\\"uk-list uk-list-bullet\\\">\\r\\n        <li *ngFor=\\\"let upload of uploads\\\" class=\\\"uk-text-warning\\\">{{ upload.id }}: {{ upload.progress }}%</li>\\r\\n        <li *ngFor=\\\"let file of value\\\" class=\\\"uk-text-success\\\">{{ file.name }}</li>\\r\\n    </ul>\\r\\n</div>\\r\\n\"","export default \"<h2>Files</h2>\\r\\n\\r\\n<app-file name=\\\"files\\\" [(ngModel)]=\\\"files\\\"></app-file>\\r\\n\\r\\n<div class=\\\"uk-padding-remove\\\">\\r\\n    <h3>Files</h3>\\r\\n\\r\\n    <ul class=\\\"uk-list uk-list-bullet\\\">\\r\\n        <li *ngFor=\\\"let file of files\\\">{{ file | json }}</li>\\r\\n    </ul>\\r\\n</div>\\r\\n\"","import { Component } from \"@angular/core\";\r\nimport { NG_VALUE_ACCESSOR } from \"@angular/forms\";\r\nimport { FileModel } from \"src/app/models/file/file.model\";\r\nimport { FileUploadModel } from \"src/app/models/file/file.upload.model\";\r\nimport { AppFileService } from \"src/app/services/file.service\";\r\nimport { AppBaseComponent } from \"../base/base.component\";\r\n\r\n@Component({\r\n    providers: [{ provide: NG_VALUE_ACCESSOR, useExisting: AppFileComponent, multi: true }],\r\n    selector: \"app-file\",\r\n    templateUrl: \"./file.component.html\"\r\n})\r\nexport class AppFileComponent extends AppBaseComponent<FileModel[]> {\r\n    constructor(private readonly appFileService: AppFileService) {\r\n        super();\r\n    }\r\n\r\n    uploads = new Array<FileUploadModel>();\r\n\r\n    change(files: FileList) {\r\n        for (let index = 0; index < files.length; index++) {\r\n            const file = files.item(index) as File;\r\n            const upload = new FileUploadModel(file.name, 0);\r\n            this.uploads.push(upload);\r\n\r\n            this.appFileService.upload(file).subscribe((result: FileUploadModel) => {\r\n                upload.progress = result.progress;\r\n\r\n                if (result.id) {\r\n                    this.value.push(new FileModel(result.id, file.name));\r\n                    this.uploads = this.uploads.filter((x) => x.progress < 100);\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n","import { CommonModule } from \"@angular/common\";\r\nimport { NgModule } from \"@angular/core\";\r\nimport { FormsModule, ReactiveFormsModule } from \"@angular/forms\";\r\nimport { AppFileComponent } from \"./file.component\";\r\n\r\n@NgModule({\r\n    declarations: [\r\n        AppFileComponent\r\n    ],\r\n    exports: [\r\n        AppFileComponent\r\n    ],\r\n    imports: [\r\n        CommonModule,\r\n        FormsModule,\r\n        ReactiveFormsModule\r\n    ]\r\n})\r\nexport class AppFileModule { }\r\n","export class FileModel {\r\n    constructor(public id: string, public name: string) { }\r\n}\r\n","export class FileUploadModel {\r\n    constructor(public id: string, public progress: number) { }\r\n}\r\n","import { HttpClient, HttpEventType, HttpRequest } from \"@angular/common/http\";\r\nimport { Injectable } from \"@angular/core\";\r\nimport { Observable } from \"rxjs\";\r\nimport { FileUploadModel } from \"../models/file/file.upload.model\";\r\n\r\n@Injectable({ providedIn: \"root\" })\r\nexport class AppFileService {\r\n    constructor(private readonly http: HttpClient) { }\r\n\r\n    upload(file: File): Observable<FileUploadModel> {\r\n        const formData = new FormData();\r\n        formData.append(file.name, file);\r\n\r\n        const request = new HttpRequest(\"POST\", \"Files\", formData, { reportProgress: true, });\r\n\r\n        return new Observable((observable: any) => {\r\n            this.http.request(request).subscribe((event: any) => {\r\n                if (event.type === HttpEventType.Response) {\r\n                    return observable.next(new FileUploadModel(event.body[0].id, 100));\r\n                }\r\n\r\n                if (event.type === HttpEventType.UploadProgress && event.total) {\r\n                    const progress = Math.round(100 * event.loaded / event.total);\r\n                    return observable.next(new FileUploadModel(\"\", progress));\r\n                }\r\n\r\n                return observable.next(new FileUploadModel(\"\", 0));\r\n            });\r\n        });\r\n    }\r\n}\r\n","import { Component } from \"@angular/core\";\r\nimport { FileModel } from \"src/app/models/file/file.model\";\r\n\r\n@Component({ selector: \"app-files\", templateUrl: \"./files.component.html\" })\r\nexport class AppFilesComponent {\r\n    files = new Array<FileModel>();\r\n}\r\n","import { CommonModule } from \"@angular/common\";\r\nimport { NgModule } from \"@angular/core\";\r\nimport { FormsModule } from \"@angular/forms\";\r\nimport { RouterModule, Routes } from \"@angular/router\";\r\nimport { AppFileModule } from \"src/app/components/file/file.module\";\r\nimport { AppFilesComponent } from \"./files.component\";\r\n\r\nconst routes: Routes = [\r\n    { path: \"\", component: AppFilesComponent }\r\n];\r\n\r\n@NgModule({\r\n    declarations: [AppFilesComponent],\r\n    imports: [\r\n        CommonModule,\r\n        FormsModule,\r\n        RouterModule.forChild(routes),\r\n        AppFileModule\r\n    ]\r\n})\r\nexport class AppFilesModule { }\r\n"],"sourceRoot":"webpack:///","file":"views-main-files-files-module-es5.js"}