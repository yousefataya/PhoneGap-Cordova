{"version":3,"sources":["./src/app/components/base/base.component.ts","./src/app/components/file/file.component.html","./src/app/components/file/file.component.ts","./src/app/components/file/file.module.ts","./src/app/models/file/file.model.ts","./src/app/models/file/file.upload.model.ts","./src/app/services/file.service.ts","./src/app/views/main/files/files.component.html","./src/app/views/main/files/files.component.ts","./src/app/views/main/files/files.module.ts"],"names":[],"mappings":"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","file":"6-es2015.05562527d5adfece0669.js","sourcesContent":["import { Input } from '@angular/core';\r\nimport { ControlValueAccessor } from '@angular/forms';\r\n\r\nexport abstract class AppBaseComponent<TValue> implements ControlValueAccessor {\r\n    @Input() autofocus = false;\r\n    @Input() class = '';\r\n    @Input() disabled = false;\r\n    @Input() formControlName!: string;\r\n    @Input() required = false;\r\n    @Input() text = '';\r\n\r\n    private onChange!: (value: TValue) => void;\r\n\r\n    private VALUE!: TValue;\r\n\r\n    get value(): TValue {\r\n        return this.VALUE;\r\n    }\r\n\r\n    set value(value: TValue) {\r\n        if (this.value === value) { return; }\r\n\r\n        this.VALUE = value;\r\n\r\n        if (this.onChange) {\r\n            this.onChange(value);\r\n        }\r\n    }\r\n\r\n    registerOnChange(onChange: (value: TValue) => void) {\r\n        this.onChange = onChange;\r\n    }\r\n\r\n    // tslint:disable-next-line: no-empty\r\n    registerOnTouched(_: () => void) { }\r\n\r\n    writeValue(value: TValue) {\r\n        this.value = value;\r\n    }\r\n}\r\n","<div class='js-upload uk-padding-small uk-padding-remove-left' uk-form-custom>\r\n    <input type='file' multiple #input [disabled]='disabled' [id]='formControlName' [name]='formControlName' [required]='required' (change)='change(input.files)'>\r\n    <button class='uk-button uk-button-default' type='button' tabindex='-1'>Select</button>\r\n</div>\r\n\r\n<div>\r\n    <ul class='uk-list uk-list-bullet'>\r\n        <li *ngFor='let upload of uploads' class='uk-text-warning'>{{ upload.id }}: {{ upload.progress }}%</li>\r\n        <li *ngFor='let file of value' class='uk-text-success'>{{ file.name }}</li>\r\n    </ul>\r\n</div>\r\n","import { Component } from '@angular/core';\r\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\r\nimport { FileModel } from 'src/app/models/file/file.model';\r\nimport { FileUploadModel } from 'src/app/models/file/file.upload.model';\r\nimport { AppFileService } from 'src/app/services/file.service';\r\nimport { AppBaseComponent } from '../base/base.component';\r\n\r\n@Component({\r\n    providers: [{ provide: NG_VALUE_ACCESSOR, useExisting: AppFileComponent, multi: true }],\r\n    selector: 'app-file',\r\n    templateUrl: './file.component.html'\r\n})\r\nexport class AppFileComponent extends AppBaseComponent<FileModel[]> {\r\n    constructor(private readonly appFileService: AppFileService) {\r\n        super();\r\n    }\r\n\r\n    uploads = new Array<FileUploadModel>();\r\n\r\n    change(files: FileList) {\r\n        for (let index = 0; index < files.length; index++) {\r\n            const file = files.item(index) as File;\r\n            const upload = new FileUploadModel(file.name, 0);\r\n            this.uploads.push(upload);\r\n\r\n            this.appFileService.upload(file).subscribe((result: FileUploadModel) => {\r\n                upload.progress = result.progress;\r\n\r\n                if (result.id) {\r\n                    this.value.push(new FileModel(result.id, file.name));\r\n                    this.uploads = this.uploads.filter((x) => x.progress < 100);\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { AppFileComponent } from './file.component';\r\n\r\n@NgModule({\r\n    declarations: [\r\n        AppFileComponent\r\n    ],\r\n    exports: [\r\n        AppFileComponent\r\n    ],\r\n    imports: [\r\n        CommonModule,\r\n        FormsModule,\r\n        ReactiveFormsModule\r\n    ]\r\n})\r\nexport class AppFileModule { }\r\n","export class FileModel {\r\n    constructor(public id: string, public name: string) { }\r\n}\r\n","export class FileUploadModel {\r\n    constructor(public id: string, public progress: number) { }\r\n}\r\n","import { HttpClient, HttpEventType, HttpRequest } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { FileUploadModel } from '../models/file/file.upload.model';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class AppFileService {\r\n    constructor(private readonly http: HttpClient) { }\r\n\r\n    upload(file: File): Observable<FileUploadModel> {\r\n        const formData = new FormData();\r\n        formData.append(file.name, file);\r\n\r\n        const request = new HttpRequest('POST', 'Files', formData, { reportProgress: true, });\r\n\r\n        return new Observable((observable: any) => {\r\n            this.http.request(request).subscribe((event: any) => {\r\n                if (event.type === HttpEventType.Response) {\r\n                    return observable.next(new FileUploadModel(event.body[0].id, 100));\r\n                }\r\n\r\n                if (event.type === HttpEventType.UploadProgress && event.total) {\r\n                    const progress = Math.round(100 * event.loaded / event.total);\r\n                    return observable.next(new FileUploadModel('', progress));\r\n                }\r\n\r\n                return observable.next(new FileUploadModel('', 0));\r\n            });\r\n        });\r\n    }\r\n}\r\n","<h2>Files</h2>\r\n\r\n<app-file name=\"files\" [(ngModel)]=\"files\"></app-file>\r\n\r\n<div class=\"uk-padding-remove\">\r\n    <h3>Files</h3>\r\n\r\n    <ul class=\"uk-list uk-list-bullet\">\r\n        <li *ngFor=\"let file of files\">{{ file | json }}</li>\r\n    </ul>\r\n</div>\r\n","import { Component } from \"@angular/core\";\r\nimport { FileModel } from \"src/app/models/file/file.model\";\r\n\r\n@Component({ selector: \"app-files\", templateUrl: \"./files.component.html\" })\r\nexport class AppFilesComponent {\r\n    files = new Array<FileModel>();\r\n}\r\n","import { CommonModule } from \"@angular/common\";\r\nimport { NgModule } from \"@angular/core\";\r\nimport { FormsModule } from \"@angular/forms\";\r\nimport { RouterModule, Routes } from \"@angular/router\";\r\nimport { AppFileModule } from \"src/app/components/file/file.module\";\r\nimport { AppFilesComponent } from \"./files.component\";\r\n\r\nconst routes: Routes = [\r\n    { path: \"\", component: AppFilesComponent }\r\n];\r\n\r\n@NgModule({\r\n    declarations: [AppFilesComponent],\r\n    imports: [\r\n        CommonModule,\r\n        FormsModule,\r\n        RouterModule.forChild(routes),\r\n        AppFileModule\r\n    ]\r\n})\r\nexport class AppFilesModule { }\r\n"],"sourceRoot":"webpack:///"}